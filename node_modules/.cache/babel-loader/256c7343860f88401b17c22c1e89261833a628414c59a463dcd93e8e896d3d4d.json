{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{useParams,useNavigate}from\"react-router-dom\";import{AuthContext}from'../AuthContext';import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Post=()=>{var _post$post_title,_post$post_desc;const[post,setPost]=useState({});const{postId}=useParams();const{auth,logOut}=useContext(AuthContext);const navigate=useNavigate();const handleLogOut=()=>{logOut();navigate('/');};const handleLoginButton=()=>{navigate('/login');};const handleRegisterButton=()=>{navigate('/register');};const getPost=async()=>{try{const response=await axios.get('http://localhost:5000/getposts');return response.data.find(item=>item.post_id===parseInt(postId))||{};}catch(error){alert('Error:'+error);return{};}};useEffect(()=>{const fetchPost=async()=>{const postData=await getPost();setPost(postData);};fetchPost();},[postId]);// Empty dependency array to only run once on component mount\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top_bar_div\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"logo\",children:/*#__PURE__*/_jsxs(\"b\",{children:[\"S\",/*#__PURE__*/_jsx(\"span\",{className:\"logo2\",children:\"F\"})]})})}),auth.username?/*#__PURE__*/_jsxs(\"div\",{className:\"auth\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"credentials\",children:[\"Logged in as: \",auth.username]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogOut,className:\"log_out_button\",children:\"Log Out\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"auth_2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"credentials\",children:\"You are not logged in.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLoginButton,className:\"log_in_button\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"span\",{className:\"credentials\",children:\"or\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRegisterButton,className:\"register_button\",children:\"Register\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:(_post$post_title=post.post_title)!==null&&_post$post_title!==void 0?_post$post_title:'Untitled'}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:(_post$post_desc=post.post_desc)!==null&&_post$post_desc!==void 0?_post$post_desc:'Empty'})]})]});};export default Post;","map":{"version":3,"names":["React","useContext","useEffect","useState","useParams","useNavigate","AuthContext","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Post","_post$post_title","_post$post_desc","post","setPost","postId","auth","logOut","navigate","handleLogOut","handleLoginButton","handleRegisterButton","getPost","response","get","data","find","item","post_id","parseInt","error","alert","fetchPost","postData","children","className","username","onClick","post_title","post_desc"],"sources":["D:/Ale lui Vlad/Projects/SpotiForums/spotiforums/src/pages/Post.js"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { AuthContext } from '../AuthContext';\r\nimport axios from \"axios\";\r\n\r\nconst Post = () => {\r\n    const [post, setPost] = useState({});\r\n    const {postId} = useParams();\r\n\r\n    const {auth, logOut} = useContext(AuthContext);\r\n    const navigate = useNavigate();\r\n\r\n    const handleLogOut = () => {\r\n        logOut();\r\n        navigate('/');\r\n    };\r\n\r\n    const handleLoginButton = () => {\r\n        navigate('/login');\r\n    }\r\n\r\n    const handleRegisterButton = () => {\r\n        navigate('/register');\r\n    }\r\n\r\n    const getPost = async () => {\r\n        try {\r\n            const response = await axios.get('http://localhost:5000/getposts');\r\n            return response.data.find(item => item.post_id === parseInt(postId)) || {};\r\n        } catch (error) {\r\n            alert('Error:' + error);\r\n            return {};\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const fetchPost = async () => {\r\n            const postData = await getPost();\r\n            setPost(postData);\r\n        };\r\n\r\n        fetchPost();\r\n    }, [postId]); // Empty dependency array to only run once on component mount\r\n\r\n    return (\r\n        <>\r\n            <div className=\"top_bar_div\">\r\n                <div>\r\n                    <span className=\"logo\"><b>S<span className=\"logo2\">F</span></b></span>\r\n                </div>\r\n                {auth.username ? (\r\n                    <div className=\"auth\">\r\n                        <span className=\"credentials\">Logged in as: {auth.username}</span>\r\n                        <button onClick={handleLogOut} className=\"log_out_button\">Log Out</button>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"auth_2\">\r\n                        <span className=\"credentials\">You are not logged in.</span>\r\n                        <div className=\"auth\">\r\n                            <button onClick={handleLoginButton} className=\"log_in_button\">Log In</button>\r\n                            <span className=\"credentials\">or</span>\r\n                            <button onClick={handleRegisterButton} className=\"register_button\">Register</button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div>\r\n                <span>{post.post_title ?? 'Untitled'}</span>\r\n                <br/>\r\n                <span>{post.post_desc ?? 'Empty'}</span>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Post;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAC5D,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,WAAW,KAAQ,gBAAgB,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE1B,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,KAAAC,gBAAA,CAAAC,eAAA,CACf,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGf,QAAQ,CAAC,CAAC,CAAC,CAAC,CACpC,KAAM,CAACgB,MAAM,CAAC,CAAGf,SAAS,CAAC,CAAC,CAE5B,KAAM,CAACgB,IAAI,CAAEC,MAAM,CAAC,CAAGpB,UAAU,CAACK,WAAW,CAAC,CAC9C,KAAM,CAAAgB,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAkB,YAAY,CAAGA,CAAA,GAAM,CACvBF,MAAM,CAAC,CAAC,CACRC,QAAQ,CAAC,GAAG,CAAC,CACjB,CAAC,CAED,KAAM,CAAAE,iBAAiB,CAAGA,CAAA,GAAM,CAC5BF,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,CAED,KAAM,CAAAG,oBAAoB,CAAGA,CAAA,GAAM,CAC/BH,QAAQ,CAAC,WAAW,CAAC,CACzB,CAAC,CAED,KAAM,CAAAI,OAAO,CAAG,KAAAA,CAAA,GAAY,CACxB,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAApB,KAAK,CAACqB,GAAG,CAAC,gCAAgC,CAAC,CAClE,MAAO,CAAAD,QAAQ,CAACE,IAAI,CAACC,IAAI,CAACC,IAAI,EAAIA,IAAI,CAACC,OAAO,GAAKC,QAAQ,CAACd,MAAM,CAAC,CAAC,EAAI,CAAC,CAAC,CAC9E,CAAE,MAAOe,KAAK,CAAE,CACZC,KAAK,CAAC,QAAQ,CAAGD,KAAK,CAAC,CACvB,MAAO,CAAC,CAAC,CACb,CACJ,CAAC,CAEDhC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAkC,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAX,OAAO,CAAC,CAAC,CAChCR,OAAO,CAACmB,QAAQ,CAAC,CACrB,CAAC,CAEDD,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,CAACjB,MAAM,CAAC,CAAC,CAAE;AAEd,mBACIR,KAAA,CAAAE,SAAA,EAAAyB,QAAA,eACI3B,KAAA,QAAK4B,SAAS,CAAC,aAAa,CAAAD,QAAA,eACxB7B,IAAA,QAAA6B,QAAA,cACI7B,IAAA,SAAM8B,SAAS,CAAC,MAAM,CAAAD,QAAA,cAAC3B,KAAA,MAAA2B,QAAA,EAAG,GAAC,cAAA7B,IAAA,SAAM8B,SAAS,CAAC,OAAO,CAAAD,QAAA,CAAC,GAAC,CAAM,CAAC,EAAG,CAAC,CAAM,CAAC,CACrE,CAAC,CACLlB,IAAI,CAACoB,QAAQ,cACV7B,KAAA,QAAK4B,SAAS,CAAC,MAAM,CAAAD,QAAA,eACjB3B,KAAA,SAAM4B,SAAS,CAAC,aAAa,CAAAD,QAAA,EAAC,gBAAc,CAAClB,IAAI,CAACoB,QAAQ,EAAO,CAAC,cAClE/B,IAAA,WAAQgC,OAAO,CAAElB,YAAa,CAACgB,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,SAAO,CAAQ,CAAC,EACzE,CAAC,cAEN3B,KAAA,QAAK4B,SAAS,CAAC,QAAQ,CAAAD,QAAA,eACnB7B,IAAA,SAAM8B,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAC,wBAAsB,CAAM,CAAC,cAC3D3B,KAAA,QAAK4B,SAAS,CAAC,MAAM,CAAAD,QAAA,eACjB7B,IAAA,WAAQgC,OAAO,CAAEjB,iBAAkB,CAACe,SAAS,CAAC,eAAe,CAAAD,QAAA,CAAC,QAAM,CAAQ,CAAC,cAC7E7B,IAAA,SAAM8B,SAAS,CAAC,aAAa,CAAAD,QAAA,CAAC,IAAE,CAAM,CAAC,cACvC7B,IAAA,WAAQgC,OAAO,CAAEhB,oBAAqB,CAACc,SAAS,CAAC,iBAAiB,CAAAD,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACnF,CAAC,EACL,CACR,EACA,CAAC,cACN3B,KAAA,QAAA2B,QAAA,eACI7B,IAAA,SAAA6B,QAAA,EAAAvB,gBAAA,CAAOE,IAAI,CAACyB,UAAU,UAAA3B,gBAAA,UAAAA,gBAAA,CAAI,UAAU,CAAO,CAAC,cAC5CN,IAAA,QAAI,CAAC,cACLA,IAAA,SAAA6B,QAAA,EAAAtB,eAAA,CAAOC,IAAI,CAAC0B,SAAS,UAAA3B,eAAA,UAAAA,eAAA,CAAI,OAAO,CAAO,CAAC,EACvC,CAAC,EACR,CAAC,CAEX,CAAC,CAED,cAAe,CAAAF,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}