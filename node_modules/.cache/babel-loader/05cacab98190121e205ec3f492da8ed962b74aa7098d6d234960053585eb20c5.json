{"ast":null,"code":"//  SPDX-License-Identifier: LGPL-2.1-or-later\n//  Copyright (c) 2015-2024 MariaDB Corporation Ab\n\n'use strict';\n\nconst PrepareWrapper = require('./prepare-wrapper');\n\n/**\n * Prepare cache wrapper\n * see https://mariadb.com/kb/en/com_stmt_prepare/#com_stmt_prepare_ok\n */\nclass PrepareCacheWrapper {\n  #use = 0;\n  #cached;\n  #prepare;\n  constructor(prepare) {\n    this.#prepare = prepare;\n    this.#cached = true;\n  }\n  incrementUse() {\n    this.#use += 1;\n    return new PrepareWrapper(this, this.#prepare);\n  }\n  unCache() {\n    this.#cached = false;\n    if (this.#use === 0) {\n      this.#prepare.close();\n    }\n  }\n  decrementUse() {\n    this.#use -= 1;\n    if (this.#use === 0 && !this.#cached) {\n      this.#prepare.close();\n    }\n  }\n  toString() {\n    return 'Prepare{use:' + this.#use + ',cached:' + this.#cached + '}';\n  }\n}\nmodule.exports = PrepareCacheWrapper;","map":{"version":3,"names":["PrepareWrapper","require","PrepareCacheWrapper","use","cached","prepare","constructor","incrementUse","unCache","close","decrementUse","toString","module","exports"],"sources":["D:/Ale lui Vlad/Projects/SpotiForums/spotiforums/node_modules/mariadb/lib/cmd/class/prepare-cache-wrapper.js"],"sourcesContent":["//  SPDX-License-Identifier: LGPL-2.1-or-later\n//  Copyright (c) 2015-2024 MariaDB Corporation Ab\n\n'use strict';\n\nconst PrepareWrapper = require('./prepare-wrapper');\n\n/**\n * Prepare cache wrapper\n * see https://mariadb.com/kb/en/com_stmt_prepare/#com_stmt_prepare_ok\n */\nclass PrepareCacheWrapper {\n  #use = 0;\n  #cached;\n  #prepare;\n\n  constructor(prepare) {\n    this.#prepare = prepare;\n    this.#cached = true;\n  }\n\n  incrementUse() {\n    this.#use += 1;\n    return new PrepareWrapper(this, this.#prepare);\n  }\n\n  unCache() {\n    this.#cached = false;\n    if (this.#use === 0) {\n      this.#prepare.close();\n    }\n  }\n\n  decrementUse() {\n    this.#use -= 1;\n    if (this.#use === 0 && !this.#cached) {\n      this.#prepare.close();\n    }\n  }\n\n  toString() {\n    return 'Prepare{use:' + this.#use + ',cached:' + this.#cached + '}';\n  }\n}\n\nmodule.exports = PrepareCacheWrapper;\n"],"mappings":"AAAA;AACA;;AAEA,YAAY;;AAEZ,MAAMA,cAAc,GAAGC,OAAO,CAAC,mBAAmB,CAAC;;AAEnD;AACA;AACA;AACA;AACA,MAAMC,mBAAmB,CAAC;EACxB,CAACC,GAAG,GAAG,CAAC;EACR,CAACC,MAAM;EACP,CAACC,OAAO;EAERC,WAAWA,CAACD,OAAO,EAAE;IACnB,IAAI,CAAC,CAACA,OAAO,GAAGA,OAAO;IACvB,IAAI,CAAC,CAACD,MAAM,GAAG,IAAI;EACrB;EAEAG,YAAYA,CAAA,EAAG;IACb,IAAI,CAAC,CAACJ,GAAG,IAAI,CAAC;IACd,OAAO,IAAIH,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC,CAACK,OAAO,CAAC;EAChD;EAEAG,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC,CAACJ,MAAM,GAAG,KAAK;IACpB,IAAI,IAAI,CAAC,CAACD,GAAG,KAAK,CAAC,EAAE;MACnB,IAAI,CAAC,CAACE,OAAO,CAACI,KAAK,CAAC,CAAC;IACvB;EACF;EAEAC,YAAYA,CAAA,EAAG;IACb,IAAI,CAAC,CAACP,GAAG,IAAI,CAAC;IACd,IAAI,IAAI,CAAC,CAACA,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAACC,MAAM,EAAE;MACpC,IAAI,CAAC,CAACC,OAAO,CAACI,KAAK,CAAC,CAAC;IACvB;EACF;EAEAE,QAAQA,CAAA,EAAG;IACT,OAAO,cAAc,GAAG,IAAI,CAAC,CAACR,GAAG,GAAG,UAAU,GAAG,IAAI,CAAC,CAACC,MAAM,GAAG,GAAG;EACrE;AACF;AAEAQ,MAAM,CAACC,OAAO,GAAGX,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}