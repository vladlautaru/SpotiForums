{"ast":null,"code":"//  SPDX-License-Identifier: LGPL-2.1-or-later\n//  Copyright (c) 2015-2024 MariaDB Corporation Ab\n\n// noinspection JSBitwiseOperatorUsage\n\n'use strict';\n\nconst Iconv = require('iconv-lite');\nconst Capabilities = require('../const/capabilities');\nconst Ed25519PasswordAuth = require('./handshake/auth/ed25519-password-auth');\nconst NativePasswordAuth = require('./handshake/auth/native-password-auth');\nconst Collations = require('../const/collations');\nconst Authentication = require('./handshake/authentication');\n\n/**\n * send a COM_CHANGE_USER: resets the connection and re-authenticates with the given credentials\n * see https://mariadb.com/kb/en/library/com_change_user/\n */\nclass ChangeUser extends Authentication {\n  constructor(cmdParam, connOpts, resolve, reject, getSocket) {\n    super(cmdParam, resolve, reject, () => {}, getSocket);\n    this.configAssign(connOpts, cmdParam.opts);\n  }\n  start(out, opts, info) {\n    if (opts.logger.query) opts.logger.query(`CHANGE USER to '${this.opts.user || ''}'`);\n    let authToken;\n    const pwd = Array.isArray(this.opts.password) ? this.opts.password[0] : this.opts.password;\n    switch (info.defaultPluginName) {\n      case 'mysql_native_password':\n      case '':\n        authToken = NativePasswordAuth.encryptSha1Password(pwd, info.seed);\n        break;\n      case 'client_ed25519':\n        authToken = Ed25519PasswordAuth.encryptPassword(pwd, info.seed);\n        break;\n      default:\n        authToken = Buffer.alloc(0);\n        break;\n    }\n    out.startPacket(this);\n    out.writeInt8(0x11);\n    out.writeString(this.opts.user || '');\n    out.writeInt8(0);\n    if (info.serverCapabilities & Capabilities.SECURE_CONNECTION) {\n      out.writeInt8(authToken.length);\n      out.writeBuffer(authToken, 0, authToken.length);\n    } else {\n      out.writeBuffer(authToken, 0, authToken.length);\n      out.writeInt8(0);\n    }\n    if (info.clientCapabilities & Capabilities.CONNECT_WITH_DB) {\n      out.writeString(this.opts.database);\n      out.writeInt8(0);\n      info.database = this.opts.database;\n    }\n    // handle default collation.\n    if (this.opts.collation) {\n      // collation has been set using charset.\n      // If server use same charset, use server collation.\n      if (!this.opts.charset || info.collation.charset !== this.opts.collation.charset) {\n        info.collation = this.opts.collation;\n      }\n    } else {\n      // if not utf8mb4 and no configuration, force to use UTF8MB4_UNICODE_CI\n      if (info.collation.charset !== 'utf8' || info.collation.maxLength === 3) {\n        info.collation = Collations.fromIndex(224);\n      }\n    }\n    out.writeInt16(info.collation.index);\n    if (info.clientCapabilities & Capabilities.PLUGIN_AUTH) {\n      out.writeString(info.defaultPluginName);\n      out.writeInt8(0);\n    }\n    if (info.clientCapabilities & Capabilities.CONNECT_ATTRS) {\n      out.writeInt8(0xfc);\n      let initPos = out.pos; //save position, assuming connection attributes length will be less than 2 bytes length\n      out.writeInt16(0);\n      const encoding = info.collation.charset;\n      writeAttribute(out, '_client_name', encoding);\n      writeAttribute(out, 'MariaDB connector/Node', encoding);\n      let packageJson = require('../../package.json');\n      writeAttribute(out, '_client_version', encoding);\n      writeAttribute(out, packageJson.version, encoding);\n      writeAttribute(out, '_node_version', encoding);\n      writeAttribute(out, process.versions.node, encoding);\n      if (opts.connectAttributes !== true) {\n        let attrNames = Object.keys(this.opts.connectAttributes);\n        for (let k = 0; k < attrNames.length; ++k) {\n          writeAttribute(out, attrNames[k], encoding);\n          writeAttribute(out, this.opts.connectAttributes[attrNames[k]], encoding);\n        }\n      }\n\n      //write end size\n      out.writeInt16AtPos(initPos);\n    }\n    out.flush();\n    this.plugin.onPacketReceive = this.handshakeResult.bind(this);\n  }\n\n  /**\n   * Assign global configuration option used by result-set to current query option.\n   * a little faster than Object.assign() since doest copy all information\n   *\n   * @param connOpts  connection global configuration\n   * @param cmdOpts   current options\n   */\n  configAssign(connOpts, cmdOpts) {\n    if (!cmdOpts) {\n      this.opts = connOpts;\n      return;\n    }\n    this.opts = cmdOpts ? Object.assign({}, connOpts, cmdOpts) : connOpts;\n    if (cmdOpts.charset && typeof cmdOpts.charset === 'string') {\n      this.opts.collation = Collations.fromCharset(cmdOpts.charset.toLowerCase());\n      if (this.opts.collation === undefined) {\n        this.opts.collation = Collations.fromName(cmdOpts.charset.toUpperCase());\n        if (this.opts.collation !== undefined) {\n          this.opts.logger.warning(\"warning: please use option 'collation' \" + \"in replacement of 'charset' when using a collation name ('\" + cmdOpts.charset + \"')\\n\" + \"(collation looks like 'UTF8MB4_UNICODE_CI', charset like 'utf8').\");\n        }\n      }\n      if (this.opts.collation === undefined) throw new RangeError(\"Unknown charset '\" + cmdOpts.charset + \"'\");\n    } else if (cmdOpts.collation && typeof cmdOpts.collation === 'string') {\n      const initial = cmdOpts.collation;\n      this.opts.collation = Collations.fromName(initial.toUpperCase());\n      if (this.opts.collation === undefined) throw new RangeError(\"Unknown collation '\" + initial + \"'\");\n    } else {\n      this.opts.collation = Collations.fromIndex(cmdOpts.charsetNumber) || connOpts.collation;\n    }\n    connOpts.password = cmdOpts.password;\n  }\n}\nfunction writeAttribute(out, val, encoding) {\n  let param = Buffer.isEncoding(encoding) ? Buffer.from(val, encoding) : Iconv.encode(val, encoding);\n  out.writeLengthCoded(param.length);\n  out.writeBuffer(param, 0, param.length);\n}\nmodule.exports = ChangeUser;","map":{"version":3,"names":["Iconv","require","Capabilities","Ed25519PasswordAuth","NativePasswordAuth","Collations","Authentication","ChangeUser","constructor","cmdParam","connOpts","resolve","reject","getSocket","configAssign","opts","start","out","info","logger","query","user","authToken","pwd","Array","isArray","password","defaultPluginName","encryptSha1Password","seed","encryptPassword","Buffer","alloc","startPacket","writeInt8","writeString","serverCapabilities","SECURE_CONNECTION","length","writeBuffer","clientCapabilities","CONNECT_WITH_DB","database","collation","charset","maxLength","fromIndex","writeInt16","index","PLUGIN_AUTH","CONNECT_ATTRS","initPos","pos","encoding","writeAttribute","packageJson","version","process","versions","node","connectAttributes","attrNames","Object","keys","k","writeInt16AtPos","flush","plugin","onPacketReceive","handshakeResult","bind","cmdOpts","assign","fromCharset","toLowerCase","undefined","fromName","toUpperCase","warning","RangeError","initial","charsetNumber","val","param","isEncoding","from","encode","writeLengthCoded","module","exports"],"sources":["D:/Ale lui Vlad/Projects/SpotiForums/spotiforums/node_modules/mariadb/lib/cmd/change-user.js"],"sourcesContent":["//  SPDX-License-Identifier: LGPL-2.1-or-later\n//  Copyright (c) 2015-2024 MariaDB Corporation Ab\n\n// noinspection JSBitwiseOperatorUsage\n\n'use strict';\n\nconst Iconv = require('iconv-lite');\nconst Capabilities = require('../const/capabilities');\nconst Ed25519PasswordAuth = require('./handshake/auth/ed25519-password-auth');\nconst NativePasswordAuth = require('./handshake/auth/native-password-auth');\nconst Collations = require('../const/collations');\nconst Authentication = require('./handshake/authentication');\n\n/**\n * send a COM_CHANGE_USER: resets the connection and re-authenticates with the given credentials\n * see https://mariadb.com/kb/en/library/com_change_user/\n */\nclass ChangeUser extends Authentication {\n  constructor(cmdParam, connOpts, resolve, reject, getSocket) {\n    super(cmdParam, resolve, reject, () => {}, getSocket);\n    this.configAssign(connOpts, cmdParam.opts);\n  }\n\n  start(out, opts, info) {\n    if (opts.logger.query) opts.logger.query(`CHANGE USER to '${this.opts.user || ''}'`);\n    let authToken;\n    const pwd = Array.isArray(this.opts.password) ? this.opts.password[0] : this.opts.password;\n    switch (info.defaultPluginName) {\n      case 'mysql_native_password':\n      case '':\n        authToken = NativePasswordAuth.encryptSha1Password(pwd, info.seed);\n        break;\n      case 'client_ed25519':\n        authToken = Ed25519PasswordAuth.encryptPassword(pwd, info.seed);\n        break;\n      default:\n        authToken = Buffer.alloc(0);\n        break;\n    }\n\n    out.startPacket(this);\n    out.writeInt8(0x11);\n    out.writeString(this.opts.user || '');\n    out.writeInt8(0);\n\n    if (info.serverCapabilities & Capabilities.SECURE_CONNECTION) {\n      out.writeInt8(authToken.length);\n      out.writeBuffer(authToken, 0, authToken.length);\n    } else {\n      out.writeBuffer(authToken, 0, authToken.length);\n      out.writeInt8(0);\n    }\n\n    if (info.clientCapabilities & Capabilities.CONNECT_WITH_DB) {\n      out.writeString(this.opts.database);\n      out.writeInt8(0);\n      info.database = this.opts.database;\n    }\n    // handle default collation.\n    if (this.opts.collation) {\n      // collation has been set using charset.\n      // If server use same charset, use server collation.\n      if (!this.opts.charset || info.collation.charset !== this.opts.collation.charset) {\n        info.collation = this.opts.collation;\n      }\n    } else {\n      // if not utf8mb4 and no configuration, force to use UTF8MB4_UNICODE_CI\n      if (info.collation.charset !== 'utf8' || info.collation.maxLength === 3) {\n        info.collation = Collations.fromIndex(224);\n      }\n    }\n    out.writeInt16(info.collation.index);\n\n    if (info.clientCapabilities & Capabilities.PLUGIN_AUTH) {\n      out.writeString(info.defaultPluginName);\n      out.writeInt8(0);\n    }\n\n    if (info.clientCapabilities & Capabilities.CONNECT_ATTRS) {\n      out.writeInt8(0xfc);\n      let initPos = out.pos; //save position, assuming connection attributes length will be less than 2 bytes length\n      out.writeInt16(0);\n\n      const encoding = info.collation.charset;\n\n      writeAttribute(out, '_client_name', encoding);\n      writeAttribute(out, 'MariaDB connector/Node', encoding);\n\n      let packageJson = require('../../package.json');\n      writeAttribute(out, '_client_version', encoding);\n      writeAttribute(out, packageJson.version, encoding);\n\n      writeAttribute(out, '_node_version', encoding);\n      writeAttribute(out, process.versions.node, encoding);\n\n      if (opts.connectAttributes !== true) {\n        let attrNames = Object.keys(this.opts.connectAttributes);\n        for (let k = 0; k < attrNames.length; ++k) {\n          writeAttribute(out, attrNames[k], encoding);\n          writeAttribute(out, this.opts.connectAttributes[attrNames[k]], encoding);\n        }\n      }\n\n      //write end size\n      out.writeInt16AtPos(initPos);\n    }\n\n    out.flush();\n    this.plugin.onPacketReceive = this.handshakeResult.bind(this);\n  }\n\n  /**\n   * Assign global configuration option used by result-set to current query option.\n   * a little faster than Object.assign() since doest copy all information\n   *\n   * @param connOpts  connection global configuration\n   * @param cmdOpts   current options\n   */\n  configAssign(connOpts, cmdOpts) {\n    if (!cmdOpts) {\n      this.opts = connOpts;\n      return;\n    }\n    this.opts = cmdOpts ? Object.assign({}, connOpts, cmdOpts) : connOpts;\n\n    if (cmdOpts.charset && typeof cmdOpts.charset === 'string') {\n      this.opts.collation = Collations.fromCharset(cmdOpts.charset.toLowerCase());\n      if (this.opts.collation === undefined) {\n        this.opts.collation = Collations.fromName(cmdOpts.charset.toUpperCase());\n        if (this.opts.collation !== undefined) {\n          this.opts.logger.warning(\n            \"warning: please use option 'collation' \" +\n              \"in replacement of 'charset' when using a collation name ('\" +\n              cmdOpts.charset +\n              \"')\\n\" +\n              \"(collation looks like 'UTF8MB4_UNICODE_CI', charset like 'utf8').\"\n          );\n        }\n      }\n      if (this.opts.collation === undefined) throw new RangeError(\"Unknown charset '\" + cmdOpts.charset + \"'\");\n    } else if (cmdOpts.collation && typeof cmdOpts.collation === 'string') {\n      const initial = cmdOpts.collation;\n      this.opts.collation = Collations.fromName(initial.toUpperCase());\n      if (this.opts.collation === undefined) throw new RangeError(\"Unknown collation '\" + initial + \"'\");\n    } else {\n      this.opts.collation = Collations.fromIndex(cmdOpts.charsetNumber) || connOpts.collation;\n    }\n    connOpts.password = cmdOpts.password;\n  }\n}\n\nfunction writeAttribute(out, val, encoding) {\n  let param = Buffer.isEncoding(encoding) ? Buffer.from(val, encoding) : Iconv.encode(val, encoding);\n  out.writeLengthCoded(param.length);\n  out.writeBuffer(param, 0, param.length);\n}\n\nmodule.exports = ChangeUser;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}