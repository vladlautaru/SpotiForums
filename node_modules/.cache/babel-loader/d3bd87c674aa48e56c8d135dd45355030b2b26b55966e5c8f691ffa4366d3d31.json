{"ast":null,"code":"import React,{useContext,useEffect,useState}from'react';import{AuthContext}from'../AuthContext';// Adjust the path as needed\nimport{useNavigate}from\"react-router-dom\";import\"./Board.css\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Board=()=>{const{auth,logOut}=useContext(AuthContext);const navigate=useNavigate();const handleLogOut=()=>{logOut();navigate('/');};const handleLoginButton=()=>{navigate('/login');};const handleRegisterButton=()=>{navigate('/register');};const handleAddPostButton=()=>{navigate('/add_post');};const getPosts=async()=>{try{const response=await axios.get('http://localhost:5000/getposts');return response.data;}catch(error){alert('Error:'+error);return[];}};const spawnPosts=(posts,navigate)=>{const container=document.getElementById(\"container\");container.innerHTML='';posts.forEach(post=>{var _post$post_date_poste,_post$post_title,_post$post_author;const postDiv=document.createElement('div');postDiv.className='post';postDiv.addEventListener('click',()=>{navigate(\"/post/\".concat(post.post_id));});postDiv.innerHTML=\"\\n            <span class=\\\"post_date\\\">\".concat((_post$post_date_poste=post.post_date_posted)!==null&&_post$post_date_poste!==void 0?_post$post_date_poste:'Unknown Date',\"</span>\\n            <br>\\n            <span class=\\\"post_title\\\">\").concat((_post$post_title=post.post_title)!==null&&_post$post_title!==void 0?_post$post_title:'Untitled',\"</span>\\n            <span class=\\\"post_author\\\"> by \").concat((_post$post_author=post.post_author)!==null&&_post$post_author!==void 0?_post$post_author:'Anonymous',\"</span>\\n        \");container.appendChild(postDiv);});};const[posts,setPosts]=useState([]);useEffect(()=>{const fetchPosts=async()=>{const postsData=await getPosts();setPosts(postsData);spawnPosts(postsData,navigate);};fetchPosts();},[]);// Empty dependency array to only run once on component mount\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top_bar_div\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"logo\",children:/*#__PURE__*/_jsxs(\"b\",{children:[\"S\",/*#__PURE__*/_jsx(\"span\",{className:\"logo2\",children:\"F\"})]})})}),auth.username?/*#__PURE__*/_jsxs(\"div\",{className:\"auth\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"credentials\",children:[\"Logged in as: \",auth.username]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogOut,className:\"log_out_button\",children:\"Log Out\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"auth_2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"credentials\",children:\"You are not logged in.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleLoginButton,className:\"log_in_button\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"span\",{className:\"credentials\",children:\"or\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRegisterButton,className:\"register_button\",children:\"Register\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"add_div\",children:/*#__PURE__*/_jsx(\"button\",{className:\"add_post_button\",onClick:handleAddPostButton,children:\"Add post\"})}),/*#__PURE__*/_jsx(\"div\",{id:\"container\"})]});};export default Board;","map":{"version":3,"names":["React","useContext","useEffect","useState","AuthContext","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Board","auth","logOut","navigate","handleLogOut","handleLoginButton","handleRegisterButton","handleAddPostButton","getPosts","response","get","data","error","alert","spawnPosts","posts","container","document","getElementById","innerHTML","forEach","post","_post$post_date_poste","_post$post_title","_post$post_author","postDiv","createElement","className","addEventListener","concat","post_id","post_date_posted","post_title","post_author","appendChild","setPosts","fetchPosts","postsData","children","username","onClick","id"],"sources":["D:/Ale lui Vlad/Projects/SpotiForums/spotiforums/src/pages/Board.js"],"sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\r\nimport { AuthContext } from '../AuthContext'; // Adjust the path as needed\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./Board.css\";\r\nimport axios from \"axios\";\r\n\r\nconst Board = () => {\r\n    const { auth, logOut } = useContext(AuthContext);\r\n    const navigate = useNavigate();\r\n\r\n    const handleLogOut = () => {\r\n        logOut();\r\n        navigate('/');\r\n    };\r\n\r\n    const handleLoginButton = () => {\r\n        navigate('/login');\r\n    }\r\n\r\n    const handleRegisterButton = () => {\r\n        navigate('/register');\r\n    }\r\n\r\n    const handleAddPostButton = () => {\r\n        navigate('/add_post');\r\n    }\r\n\r\n    const getPosts = async () => {\r\n        try {\r\n            const response = await axios.get('http://localhost:5000/getposts');\r\n            return response.data;\r\n        } catch (error) {\r\n            alert('Error:' + error);\r\n            return [];\r\n        }\r\n    }\r\n\r\n    const spawnPosts = (posts, navigate) => {\r\n        const container = document.getElementById(\"container\");\r\n\r\n        container.innerHTML = '';\r\n\r\n        posts.forEach(post => {\r\n            const postDiv = document.createElement('div');\r\n\r\n            postDiv.className = 'post';\r\n\r\n            postDiv.addEventListener('click', () => {\r\n                navigate(`/post/${post.post_id}`);\r\n            });\r\n\r\n            postDiv.innerHTML = `\r\n            <span class=\"post_date\">${post.post_date_posted ?? 'Unknown Date'}</span>\r\n            <br>\r\n            <span class=\"post_title\">${post.post_title ?? 'Untitled'}</span>\r\n            <span class=\"post_author\"> by ${post.post_author ?? 'Anonymous'}</span>\r\n        `;\r\n            container.appendChild(postDiv);\r\n        });\r\n    }\r\n\r\n    const [posts, setPosts] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const fetchPosts = async () => {\r\n            const postsData = await getPosts();\r\n            setPosts(postsData);\r\n            spawnPosts(postsData, navigate);\r\n        };\r\n\r\n        fetchPosts();\r\n    }, []); // Empty dependency array to only run once on component mount\r\n\r\n    return (\r\n        <>\r\n            <div className=\"top_bar_div\">\r\n                <div>\r\n                    <span className=\"logo\"><b>S<span className=\"logo2\">F</span></b></span>\r\n                </div>\r\n                {auth.username ? (\r\n                    <div className=\"auth\">\r\n                        <span className=\"credentials\">Logged in as: {auth.username}</span>\r\n                        <button onClick={handleLogOut} className=\"log_out_button\">Log Out</button>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"auth_2\">\r\n                        <span className=\"credentials\">You are not logged in.</span>\r\n                        <div className=\"auth\">\r\n                            <button onClick={handleLoginButton} className=\"log_in_button\">Log In</button>\r\n                            <span className=\"credentials\">or</span>\r\n                            <button onClick={handleRegisterButton} className=\"register_button\">Register</button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            <div className=\"add_div\">\r\n                <button className=\"add_post_button\" onClick={handleAddPostButton}>Add post</button>\r\n            </div>\r\n            <div id=\"container\">\r\n\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Board;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}